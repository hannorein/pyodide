From c0460391c2b71c6abaf3d01dd6fc7fb9c3cf6617 Mon Sep 17 00:00:00 2001
From: Jo Bovy <bovy@astro.utoronto.ca>
Date: Mon, 25 Jul 2022 23:44:45 -0400
Subject: [PATCH 2/2] Skip build_ext in pyodide

---
 setup.py | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/setup.py b/setup.py
index f8d2024..bb784db 100644
--- a/setup.py
+++ b/setup.py
@@ -28,6 +28,16 @@ class build_ext(_build_ext):
     def finalize_options(self):
         _build_ext.finalize_options(self)
 
+        if "PYODIDE" in os.environ:
+            self.include_dirs.append(\
+                    os.path.join(os.environ["HOSTINSTALLDIR"],
+                                 'lib','python3.10','site-packages',
+                                 'rebound'))
+            self.library_dirs.append(\
+                    os.path.join(os.environ["HOSTINSTALLDIR"],
+                                 'lib','python3.10','site-packages'))
+            return None
+
         try:
             import rebound
         except ImportError:
-- 
1.8.3.1

